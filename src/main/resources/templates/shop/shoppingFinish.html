<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>shoppingBasket</title>
  <link rel="stylesheet" th:href="@{/css/shop/shoppingFinish.css}" />
  <link rel="stylesheet" th:href="@{/css/fragment/header2.css}" />
  <link rel="stylesheet" th:href="@{/css/fragment/footer2.css}" />
  <link rel="stylesheet" th:href="@{/css/fragment/aside2.css}" />
  <link rel="stylesheet" th:href="@{/css/fragment/aside.css}" />
  <link rel="stylesheet" th:href="@{https://fonts.googleapis.com/css?family=Noto+Sans+KR:100,300,400,500,700,900&display=swap}"/>
  <link rel="stylesheet" th:href="@{https://fonts.googleapis.com/icon?family=Material+Icons}" />
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@48,400,0,0" />
</head>
<body id="body-pd">
<div class="body-container">
  <!-- 사이드바 추가 공간 -->
  <aside class="aside" th:replace="fragment/aside :: aside"></aside>
  <!-- 사이드바 추가 공간 -->
  <div class="main-container">
    <!-- 헤더 추가 공간 -->
    <header class="header2" th:replace="fragment/header2 :: header2"></header>
    <!-- 헤더 추가 공간 -->
    <div class="work-container">

      <!-- 작업공간 -->
      <p>
      <h1>결제완료<hr>
        <div class="finish-title"><span class="finish-title-title">구매가 정상적으로 완료되었습니다.</span>
          <div class="finish-list-container">
            <div class="finish-list-title">
              <div class="finish-list-title2">
                주문상품 <span th:text="${orderInfoList.size}"></span>개
              </div>
            </div>
            <div class="free">
              <div class="free-title">
                무료배송
              </div>
              <span class="img-title" >
                              <img src="../img/box.png" class="img-title2">
                              <span class="img-title3">무료배송</span>
                            </span>
            </div>
            <div>
              <table>
                <tr th:each="order : ${orderInfoList}">
                  <td class="imgEx1-title">
                    <th:block th:unless="${order.fileName != null}">
                      <img src="https://file.rankingdak.com/image/RANK/PRODUCT/PRD001/20220510/IMG1652Vjg147858177_100_100.jpg" class="imgEx1">
                    </th:block>
                    <th:block th:if="${order.fileName != null}">
                      <img th:src="${'/upload/' + order.fileUploadPath + '/' + order.fileUuid + '_' + order.fileName}">
                    </th:block>
                  </td>
                  <td>
                    <div>
                      <div class="shopping-title" th:text="${order.productName}"></div>
                    </div>
                    <div class="shopping-price">
                                  <span th:text="${#numbers.formatInteger(order.productPrice, 3, 'COMMA') + '원'}">
                                    </span> <span class="price-span" th:text="${order.orderCount + '개'}">
                                  </span>
                    </div>
                  </td>
                  <td class="priceEx1" ><span class="price" th:text="${#numbers.formatInteger(order.productPrice * order.orderCount, 3, 'COMMA') + '원'}"></span>
                    <input type="hidden" th:value="${order.productPrice * order.orderCount}" class="product-price__hidden">
                  </td>
                </tr>

              </table>
            </div>
          </div>
          <div class="finish-price-container">
            <table>
              <tr class="finish-price-container">
                <div class="finish-price-container1">
                  <div class="finish-price-title"> <span class="finish-price-title2">총 결제 금액</span></div>
                </div>
                <td class="price-result"> <span id="total-price">  </span>원</td>
              </tr>
            </table>
          </div>
          <button class="finish-shopping" type="button">쇼핑 계속하기</button>
          <a th:href="@{/shop/shoppingPayInfo}">
          <button class="purchase-history" type="button">구매내역 확인</button>
          </a>
        </div>
      </h1>
      </p>
    </div>
  </div>
</div>

<!-- 작업공간 -->
<!--                </div>-->
<!-- 푸터 추가 공간 -->
<footer class="footer2" th:replace="fragment/footer2 :: footer2"></footer>
</div>
</div>
<aside class="aside2" th:replace="fragment/aside2 :: aside2">
  <div class="menu-container"></div>
</aside>
<!-- 퀵 메뉴 추가 공간 -->
<script type="module" src="https://unpkg.com/ionicons@5.2.3/dist/ionicons/ionicons.esm.js"></script>
<script nomodule="" src="https://unpkg.com/ionicons@5.2.3/dist/ionicons/ionicons.js"></script>
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script th:src="@{/js/fragment/aside.js}"></script>
<script th:src="@{/js/meal/myPage.js}"></script>
<script th:src="@{/js/shop/shoppingFinish.js}"></script>
<script>
  var images = [];
  var currentImageIndex = 0;

  function openModal(imageList) {
    // Assign the image list to the global variable
    images = imageList;

    // Rest of the code...
    // (Place the JavaScript code mentioned in the previous response here)
  }
</script>
</body>
</html>
